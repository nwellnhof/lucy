<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!--
***********************************************

!!!! DO NOT EDIT !!!!

This file was auto-generated by cfc.

***********************************************

Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<meta name="viewport" content="width=device-width" />
<title>Lucy::Index::IndexManager – C API Documentation</title>
<style type="text/css">
body {
    max-width: 48em;
    font: 0.85em/1.4 sans-serif;
}
a {
    color: #23b;
}
table {
    border-collapse: collapse;
}
td {
    padding: 0;
}
td.label {
    padding-right: 2em;
    font-weight: bold;
}
dt {
    font-weight: bold;
}
pre {
    border: 1px solid #ccc;
    padding: 0.2em 0.4em;
    background: #f6f6f6;
    font-size: 0.92em;
}
pre a {
    text-decoration: none;
}
pre, code {
    font-family: "Consolas", "Menlo", monospace;
}
span.prefix, span.comment {
    color: #888;
}
</style>
</head>
<body>
<h1>Lucy::Index::IndexManager</h1>
<table>
<tr>
<td class="label">parcel</td>
<td><a href="../../lucy.html">Lucy</a></td>
</tr>
<tr>
<td class="label">class variable</td>
<td><code><span class="prefix">LUCY_</span>INDEXMANAGER</code></td>
</tr>
<tr>
<td class="label">struct symbol</td>
<td><code><span class="prefix">lucy_</span>IndexManager</code></td>
</tr>
<tr>
<td class="label">class nickname</td>
<td><code><span class="prefix">lucy_</span>IxManager</code></td>
</tr>
<tr>
<td class="label">header file</td>
<td><code>Lucy/Index/IndexManager.h</code></td>
</tr>
</table>
<h2>Name</h2>
<p>Lucy::Index::IndexManager – Policies governing index updating, locking, and file deletion.</p>
<h2>Description</h2>
<p>IndexManager is an advanced-use class for controlling index locking,
updating, merging, and deletion behaviors.</p>
<p>IndexManager and <a href="../../Lucy/Plan/Architecture.html">Architecture</a> are
complementary classes: Architecture is used to define traits and behaviors
which cannot change for the life of an index; IndexManager is used for
defining rules which may change from process to process.</p>
<h2>Functions</h2>
<dl>
<dt id="func_new">new</dt>
<dd>
<pre><code><span class="prefix">lucy_</span>IndexManager* <span class="comment">// incremented</span>
<span class="prefix">lucy_</span><strong>IxManager_new</strong>(
    <span class="prefix">cfish_</span><a href="../../Clownfish/String.html">String</a> *<strong>host</strong>,
    <span class="prefix">lucy_</span><a href="../../Lucy/Store/LockFactory.html">LockFactory</a> *<strong>lock_factory</strong>
);
</code></pre>
<p>Create a new IndexManager.</p>
<dl>
<dt>host</dt>
<dd><p>An identifier which should be unique per-machine.</p>
</dd>
<dt>lock_factory</dt>
<dd><p>A LockFactory.</p>
</dd>
</dl>
</dd>
<dt id="func_init">init</dt>
<dd>
<pre><code><span class="prefix">lucy_</span>IndexManager*
<span class="prefix">lucy_</span><strong>IxManager_init</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>,
    <span class="prefix">cfish_</span><a href="../../Clownfish/String.html">String</a> *<strong>host</strong>,
    <span class="prefix">lucy_</span><a href="../../Lucy/Store/LockFactory.html">LockFactory</a> *<strong>lock_factory</strong>
);
</code></pre>
<p>Initialize an IndexManager.</p>
<dl>
<dt>host</dt>
<dd><p>An identifier which should be unique per-machine.</p>
</dd>
<dt>lock_factory</dt>
<dd><p>A LockFactory.</p>
</dd>
</dl>
</dd>
</dl>
<h2>Methods</h2>
<dl>
<dt id="func_Destroy">Destroy</dt>
<dd>
<pre><code>void
<span class="prefix">lucy_</span><strong>IxManager_Destroy</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Generic destructor.  Frees the struct itself but not any complex
member elements.</p>
</dd>
<dt id="func_Set_Folder">Set_Folder</dt>
<dd>
<pre><code>void
<span class="prefix">lucy_</span><strong>IxManager_Set_Folder</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>,
    <span class="prefix">lucy_</span><a href="../../Lucy/Store/Folder.html">Folder</a> *<strong>folder</strong>
);
</code></pre>
<p>Setter for <code>folder</code> member.  Typical clients (Indexer,
IndexReader) will use this method to install their own Folder instance.</p>
</dd>
<dt id="func_Get_Folder">Get_Folder</dt>
<dd>
<pre><code><span class="prefix">lucy_</span><a href="../../Lucy/Store/Folder.html">Folder</a>*
<span class="prefix">lucy_</span><strong>IxManager_Get_Folder</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Getter for <code>folder</code> member.</p>
</dd>
<dt id="func_Get_Host">Get_Host</dt>
<dd>
<pre><code><span class="prefix">cfish_</span><a href="../../Clownfish/String.html">String</a>*
<span class="prefix">lucy_</span><strong>IxManager_Get_Host</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Getter for <code>host</code> member.</p>
</dd>
<dt id="func_Recycle">Recycle</dt>
<dd>
<pre><code><span class="prefix">cfish_</span><a href="../../Clownfish/Vector.html">Vector</a>* <span class="comment">// incremented</span>
<span class="prefix">lucy_</span><strong>IxManager_Recycle</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>,
    <span class="prefix">lucy_</span><a href="../../Lucy/Index/PolyReader.html">PolyReader</a> *<strong>reader</strong>,
    <span class="prefix">lucy_</span><a href="../../Lucy/Index/DeletionsWriter.html">DeletionsWriter</a> *<strong>del_writer</strong>,
    int64_t <strong>cutoff</strong>,
    bool <strong>optimize</strong>
);
</code></pre>
<p>Return an array of SegReaders representing segments that should be
consolidated.  Implementations must balance index-time churn against
search-time degradation due to segment proliferation. The default
implementation prefers small segments or segments with a high
proportion of deletions.</p>
<dl>
<dt>reader</dt>
<dd><p>A PolyReader.</p>
</dd>
<dt>del_writer</dt>
<dd><p>A DeletionsWriter.</p>
</dd>
<dt>cutoff</dt>
<dd><p>A segment number which all returned SegReaders must
exceed.</p>
</dd>
<dt>optimize</dt>
<dd><p>A boolean indicating whether to spend extra time
optimizing the index for search-time performance.</p>
</dd>
</dl>
</dd>
<dt id="func_Make_Write_Lock">Make_Write_Lock</dt>
<dd>
<pre><code><span class="prefix">lucy_</span><a href="../../Lucy/Store/Lock.html">Lock</a>* <span class="comment">// incremented</span>
<span class="prefix">lucy_</span><strong>IxManager_Make_Write_Lock</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Create the Lock which controls access to modifying the logical content
of the index.</p>
</dd>
<dt id="func_Set_Write_Lock_Timeout">Set_Write_Lock_Timeout</dt>
<dd>
<pre><code>void
<span class="prefix">lucy_</span><strong>IxManager_Set_Write_Lock_Timeout</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>,
    uint32_t <strong>timeout</strong>
);
</code></pre>
<p>Setter for write lock timeout.  Default: 1000 milliseconds.</p>
</dd>
<dt id="func_Get_Write_Lock_Timeout">Get_Write_Lock_Timeout</dt>
<dd>
<pre><code>uint32_t
<span class="prefix">lucy_</span><strong>IxManager_Get_Write_Lock_Timeout</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Getter for write lock timeout.</p>
</dd>
<dt id="func_Set_Write_Lock_Interval">Set_Write_Lock_Interval</dt>
<dd>
<pre><code>void
<span class="prefix">lucy_</span><strong>IxManager_Set_Write_Lock_Interval</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>,
    uint32_t <strong>timeout</strong>
);
</code></pre>
<p>Setter for write lock retry interval.  Default: 100 milliseconds.</p>
</dd>
<dt id="func_Get_Write_Lock_Interval">Get_Write_Lock_Interval</dt>
<dd>
<pre><code>uint32_t
<span class="prefix">lucy_</span><strong>IxManager_Get_Write_Lock_Interval</strong>(
    <span class="prefix">lucy_</span>IndexManager *<strong>self</strong>
);
</code></pre>
<p>Getter for write lock retry interval.</p>
</dd>
</dl>
<h2>Inheritance</h2>
<p>Lucy::Index::IndexManager is a <a href="../../Clownfish/Obj.html">Clownfish::Obj</a>.</p>
</body>
</html>
