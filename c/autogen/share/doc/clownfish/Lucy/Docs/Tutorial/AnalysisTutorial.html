<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!--
***********************************************

!!!! DO NOT EDIT !!!!

This file was auto-generated by cfc.

***********************************************

Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<meta name="viewport" content="width=device-width" />
<title>Lucy::Docs::Tutorial::AnalysisTutorial</title>
<style type="text/css">
body {
    max-width: 48em;
    font: 0.85em/1.4 sans-serif;
}
a {
    color: #23b;
}
table {
    border-collapse: collapse;
}
td {
    padding: 0;
}
td.label {
    padding-right: 2em;
    font-weight: bold;
}
dt {
    font-weight: bold;
}
pre {
    border: 1px solid #ccc;
    padding: 0.2em 0.4em;
    background: #f6f6f6;
    font-size: 0.92em;
}
pre a {
    text-decoration: none;
}
pre, code {
    font-family: "Consolas", "Menlo", monospace;
}
span.prefix, span.comment {
    color: #888;
}
</style>
</head>
<body>
<h1>How to choose and use Analyzers.</h1>
<p>Try swapping out the EasyAnalyzer in our Schema for a
<a href="../../../Lucy/Analysis/StandardTokenizer.html">StandardTokenizer</a>:</p>
<pre><code class="language-c">    StandardTokenizer *tokenizer = StandardTokenizer_new();
    FullTextType *type = FullTextType_new((Analyzer*)tokenizer);
</code></pre>
<p>Search for <code>senate</code>, <code>Senate</code>, and <code>Senator</code> before and after making the
change and re-indexing.</p>
<p>Under EasyAnalyzer, the results are identical for all three searches, but
under StandardTokenizer, searches are case-sensitive, and the result sets for
<code>Senate</code> and <code>Senator</code> are distinct.</p>
<h2>EasyAnalyzer</h2>
<p>What’s happening is that <a href="../../../Lucy/Analysis/EasyAnalyzer.html">EasyAnalyzer</a> is performing more aggressive
processing than StandardTokenizer.  In addition to tokenizing, it’s also
converting all text to lower case so that searches are case-insensitive, and
using a “stemming” algorithm to reduce related words to a common stem (<code>senat</code>,
in this case).</p>
<p>EasyAnalyzer is actually multiple Analyzers wrapped up in a single package.
In this case, it’s three-in-one, since specifying a EasyAnalyzer with
<code>language =&gt; 'en'</code> is equivalent to this snippet creating a
<a href="../../../Lucy/Analysis/PolyAnalyzer.html">PolyAnalyzer</a>:</p>
<pre><code class="language-c">    Vector *analyzers = Vec_new(3);
    Vec_Push(analyzers, (Analyzer*)StandardTokenizer_new());
    Vec_Push(analyzers, (Analyzer*)Normalizer_new(NULL, true, false));
    Vec_Push(analyzers, (Analyzer*)SnowStemmer_new(language));

    PolyAnalyzer *analyzer = PolyAnalyzer_new(NULL, analyzers);
    DECREC(analyzers);
</code></pre>
<p>You can add or subtract Analyzers from there if you like.  Try adding a fourth
Analyzer, a SnowballStopFilter for suppressing “stopwords” like “the”, “if”,
and “maybe”.</p>
<pre><code class="language-c">    Vec_Push(analyzers, (Analyzer*)StandardTokenizer_new());
    Vec_Push(analyzers, (Analyzer*)Normalizer_new(NULL, true, false));
    Vec_Push(analyzers, (Analyzer*)SnowStemmer_new(language));
    Vec_Push(analyzers, (Analyzer*)SnowStop_new(language, NULL));
</code></pre>
<p>Also, try removing the SnowballStemmer.</p>
<pre><code class="language-c">    Vec_Push(analyzers, (Analyzer*)StandardTokenizer_new());
    Vec_Push(analyzers, (Analyzer*)Normalizer_new(NULL, true, false));
</code></pre>
<p>The original choice of a stock English EasyAnalyzer probably still yields the
best results for this document collection, but you get the idea: sometimes you
want a different Analyzer.</p>
<h2>When the best Analyzer is no Analyzer</h2>
<p>Sometimes you don’t want an Analyzer at all.  That was true for our “url”
field because we didn’t need it to be searchable, but it’s also true for
certain types of searchable fields.  For instance, “category” fields are often
set up to match exactly or not at all, as are fields like “last_name” (because
you may not want to conflate results for “Humphrey” and “Humphries”).</p>
<p>To specify that there should be no analysis performed at all, use StringType:</p>
<pre><code class="language-c">    String     *name = Str_newf(&quot;category&quot;);
    StringType *type = StringType_new();
    Schema_Spec_Field(schema, name, (FieldType*)type);
    DECREF(type);
    DECREF(name);
</code></pre>
<h2>Highlighting up next</h2>
<p>In our next tutorial chapter, <a href="../../../Lucy/Docs/Tutorial/HighlighterTutorial.html">HighlighterTutorial</a>,
we’ll add highlighted excerpts from the “content” field to our search results.</p>
</body>
</html>
