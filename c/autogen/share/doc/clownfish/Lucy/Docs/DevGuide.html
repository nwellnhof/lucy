<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!--
***********************************************

!!!! DO NOT EDIT !!!!

This file was auto-generated by cfc.

***********************************************

Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<meta name="viewport" content="width=device-width" />
<title>Lucy::Docs::DevGuide</title>
<style type="text/css">
body {
    max-width: 48em;
    font: 0.85em/1.4 sans-serif;
}
a {
    color: #23b;
}
table {
    border-collapse: collapse;
}
td {
    padding: 0;
}
td.label {
    padding-right: 2em;
    font-weight: bold;
}
dt {
    font-weight: bold;
}
pre {
    border: 1px solid #ccc;
    padding: 0.2em 0.4em;
    background: #f6f6f6;
    font-size: 0.92em;
}
pre a {
    text-decoration: none;
}
pre, code {
    font-family: "Consolas", "Menlo", monospace;
}
span.prefix, span.comment {
    color: #888;
}
</style>
</head>
<body>
<h1>Quick-start guide to hacking on Apache Lucy.</h1>
<p>The Apache Lucy code base is organized into roughly four layers:</p>
<ul>
<li>Charmonizer - compiler and OS configuration probing.</li>
<li>Clownfish - header files.</li>
<li>C - implementation files.</li>
<li>Host - binding language.</li>
</ul>
<p>Charmonizer is a configuration prober which writes a single header file,
“charmony.h”, describing the build environment and facilitating
cross-platform development.  It’s similar to Autoconf or Metaconfig, but
written in pure C.</p>
<p>The “.cfh” files within the Lucy core are Clownfish header files.
Clownfish is a purpose-built, declaration-only language which superimposes
a single-inheritance object model on top of C which is specifically
designed to co-exist happily with variety of “host” languages and to allow
limited run-time dynamic subclassing.  For more information see the
Clownfish docs, but if there’s one thing you should know about Clownfish OO
before you start hacking, it’s that method calls are differentiated from
functions by capitalization:</p>
<pre><code>Indexer_Add_Doc   &lt;-- Method, typically uses dynamic dispatch.
Indexer_add_doc   &lt;-- Function, always a direct invocation.
</code></pre>
<p>The C files within the Lucy core are where most of Lucy’s low-level
functionality lies.  They implement the interface defined by the Clownfish
header files.</p>
<p>The C core is intentionally left incomplete, however; to be usable, it must
be bound to a “host” language.  (In this context, even C is considered a
“host” which must implement the missing pieces and be “bound” to the core.)
Some of the binding code is autogenerated by Clownfish on a spec customized
for each language.  Other pieces are hand-coded in either C (using the
host’s C API) or the host language itself.</p>
</body>
</html>
